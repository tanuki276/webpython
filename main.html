<!DOCTYPE html><html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>liefantidia</title>
    <style>
        :root {
            --wiki-bg: #ffffff;
            --wiki-text: #202122;
            --wiki-border: #a2a9b1;
        }body {
        font-family: system-ui, sans-serif;
        background: var(--wiki-bg);
        color: var(--wiki-text);
        margin: 0;
        padding: 20px;
        line-height: 1.65;
    }

    header {
        border-bottom: 1px solid var(--wiki-border);
        margin-bottom: 20px;
        padding-bottom: 10px;
    }

    h1 {
        font-size: 1.8rem;
        margin: 0;
    }

    #articleContent img {
        border-radius: 4px;
    }

    .error-message {
        color: #b00020;
        font-weight: bold;
    }

    a {
        color: #0645ad;
        text-decoration: none;
    }

    a:hover {
        text-decoration: underline;
    }
</style>

</head>
<body>
    <header>
        <h1 id="pageTitle">liefantidia</h1>
    </header><h2 id="articleTitle">liefantidia</h2>
<div id="articleContent">読み込み中...</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const urlParams = new URLSearchParams(window.location.search);
        const query = urlParams.get('query');

        const titleElement = document.getElementById('articleTitle');
        const contentElement = document.getElementById('articleContent');
        const pageTitleElement = document.getElementById('pageTitle');

        if (!query) {
            pageTitleElement.textContent = 'エラー';
            titleElement.textContent = 'エラー: 検索クエリがありません';
            contentElement.innerHTML = '<p class="error-message">index.htmlから正しくリンクが渡されていません。</p>';
            return;
        }

        titleElement.textContent = query;
        pageTitleElement.textContent = `${query} - liefantidia`;

        const apiUrl = `https://ja.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(query)}`;

        fetch(apiUrl)
            .then(response => {
                if (!response.ok) {
                    throw new Error('APIからの応答エラー: ' + response.status);
                }
                return response.json();
            })
            .then(data => {
                if (data.type === 'disambiguation' || data.type === 'redirect' || !data.extract) {
                    throw new Error('指定された記事の要約が見つからないか、曖昧さ回避ページです。');
                }

                contentElement.innerHTML = `
                    ${data.thumbnail ? `<img src="${data.thumbnail.source}" style="float:right; margin: 0 0 10px 20px; max-width: 300px; height: auto; border: 1px solid var(--wiki-border);">` : ''}
                    <p>${data.extract_html.replace(/<\/?a[^>]*>/g, "")}</p>
                    <p style="clear: both; margin-top: 20px;"><a href="${data.content_urls.desktop.page}" target="_blank">→ 詳細を見る</a></p>
                `;
            })
            .catch(error => {
                console.error('API Error:', error);
                titleElement.textContent = `${query} (記事が見つかりません)`;
                contentElement.innerHTML = `
                    <p class="error-message"><strong>エラーが発生しました。</strong></p>
                    <p>検索語句を確認するか、元のページに戻ってください。</p>
                `;
            });
    });
</script>

</body>
</html>